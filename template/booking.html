{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
</head>
<script type="text/javascript"
    src="https://www.bing.com/api/maps/mapcontrol?key=Agyr0UQGWTFzP3Fwb3PDJ_ahP24jx9jRgpUWwBD_37B8MXu1oql6WCs6J-vgU1YT"></script>
<script>
    var loc = {
        cord: "9.5915891,76.521997",
        head: "Your Location",
    };

    var map;
    var searchManager;

    function initMap() {
        var cord = loc.cord;
        var cordArray = cord.split(",");
        var latitude = parseFloat(cordArray[0].trim());
        var longitude = parseFloat(cordArray[1].trim());

        map = new Microsoft.Maps.Map("#myMap", {
            credentials:
                "Agyr0UQGWTFzP3Fwb3PDJ_ahP24jx9jRgpUWwBD_37B8MXu1oql6WCs6J-vgU1YT",
            zoom: 10,
        });

        // Create markers for the predefined locations
        var markerLocations = [
            {
                location: new Microsoft.Maps.Location(9.5915891, 76.521997),
                title: "Kottayam",
            },
            {
                location: new Microsoft.Maps.Location(9.4980588, 76.3387526),
                title: "Alappuzha",
            },
            {
                location: new Microsoft.Maps.Location(9.5512534, 76.6159242),
                title: "Meenadom",
            },
            {
                location: new Microsoft.Maps.Location(9.9773506, 76.4115431),
                title: "Puthenkurishu",
            },
            {
                location: new Microsoft.Maps.Location(9.5595, 76.7874),
                title: "Kanjirappally",
            },
            {
                location: new Microsoft.Maps.Location(8.524109, 76.9362462),
                title: "Trivandrum",
            },
            {
                location: new Microsoft.Maps.Location(latitude, longitude),
                title: "{{loc.head}}",
            },
        ];

        for (var i = 0; i < markerLocations.length; i++) {
            var marker = new Microsoft.Maps.Pushpin(markerLocations[i].location, {
                title: markerLocations[i].title,
            });
            map.entities.push(marker);
        }

        // Set the center and zoom level of the map based on the markers
        var bounds = Microsoft.Maps.LocationRect.fromLocations(
            markerLocations.map(function (marker) {
                return marker.location;
            })
        );
        map.setView({ bounds: bounds });

        // Initialize the search manager
        Microsoft.Maps.loadModule("Microsoft.Maps.Search", function () {
            searchManager = new Microsoft.Maps.Search.SearchManager(map);
        });
    }

    function searchLocation() {
        var query = document.getElementById("searchInput").value;
        if (!searchManager) {
            alert("Search functionality is not available.");
            return;
        }
        searchManager.geocode({
            where: query,
            callback: function (results) {
                if (results && results.results && results.results.length > 0) {
                    var topResult = results.results[0];
                    map.setView({ bounds: topResult.bestView });
                    var location = topResult.location;
                    var marker = new Microsoft.Maps.Pushpin(location);
                    map.entities.push(marker);
                } else {
                    alert("No results found for the search query.");
                }
            },
        });
    }

    // Call the initMap function once the page is loaded
    window.onload = initMap;
</script>
<style>
    body {
        font-family: 'Varela Round', sans-serif;
    }

    .modal-confirm {
        color: #636363;
        width: 400px;
    }

    .modal-confirm .modal-content {
        padding: 20px;
        border-radius: 5px;
        border: none;
        text-align: center;
        font-size: 14px;
    }

    .modal-confirm .modal-header {
        border-bottom: none;
        position: relative;
    }

    .modal-confirm h4 {
        text-align: center;
        font-size: 26px;
        margin: 30px 0 -10px;
    }

    .modal-confirm .close {
        position: absolute;
        top: -5px;
        right: -2px;
    }

    .modal-confirm .modal-body {
        color: #999;
    }

    .modal-confirm .modal-footer {
        border: none;
        text-align: center;
        border-radius: 5px;
        font-size: 13px;
        padding: 10px 15px 25px;
    }

    .modal-confirm .modal-footer a {
        color: #999;
    }

    .modal-confirm .icon-box {
        width: 80px;
        height: 80px;
        margin: 0 auto;
        border-radius: 50%;
        z-index: 9;
        text-align: center;
        border: 3px solid #f15e5e;
    }

    .modal-confirm .icon-box i {
        color: #f15e5e;
        font-size: 46px;
        display: inline-block;
        margin-top: 13px;
    }

    .modal-confirm .btn,
    .modal-confirm .btn:active {
        color: #fff;
        border-radius: 4px;
        background: #60c7c1;
        text-decoration: none;
        transition: all 0.4s;
        line-height: normal;
        min-width: 120px;
        border: none;
        min-height: 40px;
        border-radius: 3px;
        margin: 0 5px;
    }

    .modal-confirm .btn-secondary {
        background: #c1c1c1;
    }

    .modal-confirm .btn-secondary:hover,
    .modal-confirm .btn-secondary:focus {
        background: #a8a8a8;
    }

    .modal-confirm .btn-danger {
        background: #f15e5e;
    }

    .modal-confirm .btn-danger:hover,
    .modal-confirm .btn-danger:focus {
        background: #ee3535;
    }

    .trigger-btn {
        display: inline-block;
        margin: 100px auto;
    }
</style>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <!-- Your other navbar content -->

            <!-- Flex container for the search bar and Home button -->
            <div class="d-flex justify-content-between align-items-center w-100">
                <!-- Search bar -->
                <div class="col-md-6">
                    <div class="card-body row no-gutters align-items-center">
                        <div class="col-auto">
                            <i class="fas fa-search h4 text-body"></i>
                        </div>
                        <div class="col" id="searchInput">
                            <input class="srh form-control form-control-md form-control-borderless" type="search"
                                placeholder="Search here" />
                        </div>
                        <div class="col-auto px-3">
                            <button class="searchbtn btn btn-danger " type="submit">
                                Search
                            </button>
                        </div>

                    </div>
                </div>

                <!-- Home button -->
                <div class="col-md-6 text-md-center">
                    <a href="{% url 'index' %}" class="btn btn-primary">Home</a>
                </div>
            </div>
        </div>
    </nav>



    <div class="container-fluid col-12 d-flex justify-content-center">
        <div class="map" id="myMap" style="width: 100%; height: 700px"></div>
    </div>
    <form>
        {% for i in stdata %}
        <div class="card shadow p-4 bg-light.bg-gradient">
            <div class="row align-items-center">
                <div class="col-md-3">
                    <a href="#">
                        <img src="{{i.photo.url}}" alt="photo" height="200px" width="250px" />
                    </a>
                </div>
                <!-- col.// -->
                <!-- <p>Image URL: {{ i.url }}</p> -->
                <div class="col-md-6">
                    <div class="info-main">
                        <b><span>{{ i.stname }}</span></b><br>
                        <b><span>Ownername: {{ i.ownername }}</span></b>
                        <div class="d-flex my-3">
                            <!-- <span class="star fas fa-star text-warning me-1"></span>
                            <span class="star fas fa-star text-warning me-1"></span>
                            <span class="star fas fa-star text-warning me-1"></span>
                            <span class="star fas fa-star text-warning me-1"></span>
                            <span class="star fas fa-star text-warning"></span>
                            <span class="badge badge-pill badge-gray ms-2">4.7</span> -->

                            <span class="small text-success ms-3"><span class="fas fa-shopping-cart me-1">
                                    maxslot {{ i.maxslot }}</span>
                                    <b><span>  Available slot: {{ i.available }}</span></b>                        </div>
                        <b>
                            <p>{{ i.place }}</p>
                        </b>
                        <b>
                            Contact :
                            <a class="text-decoration-none text-dark" href="tel:{{  i.contact }}">{{ i.contact }}</a>
                            </p>
                          </b>
                        <p>{{ i.description }}</p>
                    </div>
                </div>
                <div class="col-12 col-md-3">
                    <div class="d-flex align-items-center">
                        <span class="h5 mb-0 text-gray text-through me-2">
                            {{ i.price}}/hr</span>
                    </div>
                    <!-- info-price-detail // -->
                    <div class="d-grid gap-2 mt-4">
                        <a class="btn btn-tertiary btn-sm btn-primary" href="{% url 'bookstation' station_id=i.id %}">
                            Book Now
                        </a>
                        <a href="#" class="btn btn-tertiary btn-sm btn-outline-danger favorite-button">
                            <span class="fa fa-heart me-1"></span> Favorite
                        </a>
                    </div>

                </div>
            </div>
        </div>
        {% endfor %}
    </form>
</body>

</html>