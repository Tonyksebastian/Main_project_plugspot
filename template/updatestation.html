{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <!-- Bootstrap JavaScript -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

  <style>
    /* Custom CSS (You can keep your custom styles here) */

    @media (min-width: 1025px) {
      .h-custom {
        height: 100vh !important;
      }
    }

    /* You can keep your existing styles here */
  </style>
</head>

<body>
  <div class="container mt-5">
    <div class="col-md-6 text-md-center w-100 justify-content-center">
      <a href="{% url 'index' %}" class="btn btn-primary m-2">Home</a>
    </div>
    <form action="" method="POST" enctype="multipart/form-data">
      {% for i in station %}
      {% csrf_token %}
      <section class="h-100 h-custom gradient-custom-2">
        <div class="container py-5 h-100">
          <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-12">
              <div class="card card-registration card-registration-2">
                <div class="card-body p-0">
                  <div class="row g-0">
                    <div class="col-lg-6">
                      <div class="p-5">
                        <h3 class="fw-normal mb-3 text-primary">General Information</h3>
                        <div class="form-group">
                          <label for="stname">Station name</label>
                          <input type="text" id="stname" name="stname" value="{{i.stname}}" class="form-control"
                            required>
                          <span id="stnamespan"></span>
                        </div>
                        <div class="form-group">
                          <label for="ownername">Owner name</label>
                          <input type="text" id="ownername" name="ownername" value="{{i.ownername}}"
                            class="form-control" required>
                          <span id="ownspan"></span>
                        </div>
                        <div class="form-group">
                          <label for="loc">Location</label>
                          <input type="text" id="loc" name="loc" value="{{i.place}}" class="form-control" required>
                          <span id="locspan"></span>
                        </div>
                        <div class="form-group">
                          <label for="max-slot">Max Slot</label>
                          <select id="maxslot" class="form-control" name="max_slot" >
                            <option value="">Select Max Slot</option>
                            {% for num in stnumber %}
                            <option value="{{ num }}">{{ num }}</option>
                            {% endfor %}
                          </select>
                          <span id="span"></span>
                        </div>
                        <div class="form-group">
                          <label for="form3Examplev5">Choose Photo</label>
                          <input type="file" id="form3Examplev5" name="photo" class="form-control" alt="photo" required>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-6 bg-indigo text-white">
                      <div class="p-5">
                        <h3 class="fw-normal mb-3">More Details</h3>
                        <div class="form-group">
                          <label for="desc">Description:</label>
                          <textarea class="form-control" id="desc" name="desc" rows="4">{{i.description}}</textarea>
                          <span id="descspan"></span>
                        </div>
                        <div class="row">
                          <div class="col-md-7 mb-1 pb-0">
                            <div class="form-group">
                              <label for="lat">Latitude</label>
                              <input type="text" id="lat" class="form-control" name="lat" value="{{i.latitude}}">
                              <span id="latspan"></span>
                            </div>
                            <div class="form-group">
                              <label for="long">Longitude</label>
                              <input type="text" id="long" class="form-control" name="long" value="{{i.longitude}}">
                              <span id="longspan"></span>
                            </div>
                          </div>
                        </div>
                        <div class="form-group">
                          <label for="price">Price</label>
                          <input type="text" id="price" class="form-control" name="price" value="{{i.price}}">
                          <span id="pricespan"></span>
                        </div>
                        <div class="form-group text-center">
                          <button type="submit" id="btn1" class="btn btn-primary btn-lg"
                            data-mdb-ripple-color="dark">Update</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      {% endfor %}
    </form>
  </div>
  <!-- Add Bootstrap JS (jQuery and Popper.js) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
<script>
  $(document).ready(function () {
    $("#stname").keyup(function () {
      validatestnName("#stname");
    });
    $("#ownername").keyup(function () {
      validatesoName("#ownername");
    });
    $("#loc").keyup(function () {
      validateloc("#loc");
    });

    $("#desc").keyup(function () {
      validatesdesc("#desc");
    });

    $("#lat").keyup(function () {
      validateslat("#lat");
    });

    $("#long").keyup(function () {
      validateslong("#long");
    });

    $("#price").keyup(function () {
      validatesprice("#price");
    });
  });

  function validatestnName(fieldId) {
    var name = $(fieldId).val();
    var lettersWithSpaces = /^[A-Za-z\s]+$/;
    var submitButton = $("#btn1");
    if (name.trim() === "") {
      $("#stnamespan").html("Enter the Name").css("color", "red");
      submitButton.prop("disabled", true);
      return false;
    } else if (!lettersWithSpaces.test(name)) {
      $("#stnamespan")
        .html("Name field required only alphabet characters with spaces")
        .css("color", "red");
      submitButton.prop("disabled", true);
      return false;
    } else {
      $("#stnamespan").html("");
      submitButton.prop("disabled", false);
      return true;
    }
  }

  function validatesoName(fieldId) {
    var name = $(fieldId).val();
    var lettersWithSpaces = /^[A-Za-z\s]+$/;
    var submitButton = $("#btn1");
    if (name.trim() === "") {
      $("#ownspan").html("Enter the Owner name").css("color", "red");
      submitButton.prop("disabled", true);
      return false;
    } else if (!lettersWithSpaces.test(name)) {
      $("#ownspan")
        .html("Name field required only alphabet characters with spaces")
        .css("color", "red");
      submitButton.prop("disabled", true);
      return false;
    } else {
      $("#ownspan").html("");
      submitButton.prop("disabled", false);
      return true;
    }
  }
  function validateloc(fieldId) {
    var name = $(fieldId).val();
    var lettersWithSpaces = /^[A-Za-z\s]+$/;
    var submitButton = $("#btn1");
    if (name.trim() === "") {
      $("#locspan").html("Enter the Location").css("color", "red");
      submitButton.prop("disabled", true);
      return false;
    } else if (!lettersWithSpaces.test(name)) {
      $("#locspan")
        .html("Name field required only alphabet characters with spaces")
        .css("color", "red");
      submitButton.prop("disabled", true);
      return false;
    } else {
      $("#locspan").html("");
      submitButton.prop("disabled", false);
      return true;
    }
  }

  function validatesdesc(fieldId) {
    var description = $(fieldId).val();
    var alphanumericWithSpaces = /^[A-Za-z0-9\s]+$/;
    var submitButton = $("#btn1");
    
    if (description.trim() === "") {
        $("#descspan").html("Enter the Description").css("color", "red");
        submitButton.prop("disabled", true);
        return false;
    } else if (!alphanumericWithSpaces.test(description)) {
        $("#descspan").html("Description should only contain letters, numbers, and spaces").css("color", "red");
        submitButton.prop("disabled", true);
        return false;
    } else {
        $("#descspan").html("");
        submitButton.prop("disabled", false);
        return true;
    }
}


  function validateslat(fieldId) {
    var latitude = $(fieldId).val();
    var latitudePattern = /^-?([1-8]?[0-9]\.{1}\d{1,6}|90\.0{1})$/; // Matches valid latitude values
    var submitButton = $("#btn1");

    if (latitude.trim() === "") {
      $("#latspan").html("Enter the Latitude").css("color", "red");
      submitButton.prop("disabled", true);
      return false;
    } else if (!latitudePattern.test(latitude)) {
      $("#latspan")
        .html("Latitude field required a valid latitude value")
        .css("color", "red");
      submitButton.prop("disabled", true);
      return false;
    } else {
      $("#latspan").html("");
      submitButton.prop("disabled", false);
      return true;
    }
  }

  function validateslong(fieldId) {
    var location = $(fieldId).val();
    var latitudePattern = /^-?([1-8]?[0-9]\.{1}\d{1,6}|90\.0{1})$/; // Matches valid latitude values
    var submitButton = $("#btn1");

    if (location.trim() === "") {
      $("#longspan").html("Enter the Longitude").css("color", "red");
      submitButton.prop("disabled", true);
      return false;
    } else if (!latitudePattern.test(location)) {
      $("#longspan")
        .html("Longitude field required a valid longitude value")
        .css("color", "red");
      submitButton.prop("disabled", true);
      return false;
    } else {
      $("#longspan").html("");
      submitButton.prop("disabled", false);
      return true;
    }
  }

  function validatesprice(fieldId) {
    var price = $(fieldId).val();
    var numbersOnly = /^\d+(\.\d{1,2})?$/; // Allows whole numbers or numbers with up to 2 decimal places
    var submitButton = $("#btn1");

    if (price.trim() === "") {
      $("#pricespan").html("Enter the Price").css("color", "red");
      submitButton.prop("disabled", true);
      return false;
    } else if (!numbersOnly.test(price)) {
      $("#pricespan")
        .html("Price field required only numeric characters")
        .css("color", "red");
      submitButton.prop("disabled", true);
      return false;
    } else {
      $("#pricespan").html("");
      submitButton.prop("disabled", false);
      return true;
    }
  }

  function checkall() {
    if (
      validatefName() &&
      validatesName() &&
      validateEmail() &&
      validatePassword() &&
      validateConfirmPassword() &&
      validatePhoneNumber()
    )
      return true;

    return false;
  }
</script>

</html>